!function(e){var t={};function r(o){if(t[o])return t[o].exports;var a=t[o]={i:o,l:!1,exports:{}};return e[o].call(a.exports,a,a.exports,r),a.l=!0,a.exports}r.m=e,r.c=t,r.d=function(e,t,o){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(r.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var a in e)r.d(o,a,function(t){return e[t]}.bind(null,a));return o},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=0)}([function(e,t,r){r(1),r(2),r(3),r(4),e.exports=r(5)},function(e,t){void 0!==AppDependencies&&AppDependencies.push("virtoCommerce.assets"),angular.module("virtoCommerce.assets",[]).config(["$stateProvider",function(e){e.state("workspace.assets",{url:"/assets",templateUrl:"$(Platform)/Scripts/common/templates/home.tpl.html",controller:["$scope","platformWebApp.bladeNavigationService",function(e,t){t.showBlade({id:"assetList",controller:"platformWebApp.assets.assetListController",template:"Modules/$(virtoCommerce.Assets)/Scripts/blades/asset-list.tpl.html",isClosingDisabled:!0})}]})}]).run(["platformWebApp.mainMenuService","$state",function(e,t){var r={path:"browse/assets",icon:"fa fa-folder-o",title:"platform.menu.assets",priority:130,action:function(){t.go("workspace.assets")},permission:"platform:asset:access"};e.addMenuItem(r)}])},function(e,t){angular.module("platformWebApp").controller("platformWebApp.assets.assetListController",["$scope","$translate","platformWebApp.assets.api","platformWebApp.bladeNavigationService","platformWebApp.dialogService","$sessionStorage","platformWebApp.bladeUtils","platformWebApp.uiGridHelper",function(e,t,r,o,a,n,l,i){var s=e.blade;function p(e,t){return{id:e,name:t,blade:s,navigate:function(e){o.closeBlade(s,(function(){s.disableOpenAnimation=!0,o.showBlade(s,s.parentBlade)}))}}}function c(e){o.closeChildrenBlades(s,(function(){var t={id:"confirmDeleteItem",title:"platform.dialogs.folders-delete.title",message:"platform.dialogs.folders-delete.message",callback:function(t){if(t){var a=_.pluck(e,"url");r.remove({urls:a},s.refresh,(function(e){o.setError("Error "+e.status,s)}))}}};a.showConfirmationDialog(t)}))}s.title="platform.blades.asset-list.title",s.currentEntity||(s.currentEntity={}),s.refresh=function(){s.isLoading=!0,r.search({keyword:s.searchKeyword,folderUrl:s.currentEntity.url},(function(t){e.pageSettings.totalItems=t.totalCount,_.each(t.results,(function(e){e.isImage=e.contentType&&e.contentType.startsWith("image/"),e.isImage&&(e.noCacheUrl=e.url+"?t="+e.modifiedDate)})),e.listEntries=t.results,s.isLoading=!1,function(){if(s.breadcrumbs){var e=s.breadcrumbs.slice(0);if(s.currentEntity.url&&_.all(e,(function(e){return e.id!==s.currentEntity.url}))){var t=p(s.currentEntity.url,s.currentEntity.name);e.push(t)}s.breadcrumbs=e}else s.breadcrumbs=[p(s.currentEntity.url,"all")]}()}),(function(e){o.setError("Error "+e.status,s)}))},e.copyUrl=function(e){window.prompt("Copy to clipboard: Ctrl+C, Enter",e.url)},e.downloadUrl=function(e){window.open(e.url,"_blank")},e.delete=function(e){c([e])},e.selectNode=function(e){if("folder"===e.type){var t={id:s.id,breadcrumbs:s.breadcrumbs,currentEntity:e,disableOpenAnimation:!0,controller:s.controller,template:s.template,isClosingDisabled:s.isClosingDisabled};o.showBlade(t,s.parentBlade)}},s.headIcon="fa-folder-o",s.toolbarCommands=[{name:"platform.commands.refresh",icon:"fa fa-refresh",executeMethod:s.refresh,canExecuteMethod:function(){return!0}},{name:"platform.commands.new-folder",icon:"fa fa-folder-o",executeMethod:function(){var e,o;e=t.instant("platform.dialogs.create-folder.title"),null!=(o=prompt(e+"\n\nEnter folder name:"))&&r.createFolder({name:o,parentUrl:s.currentEntity.url},s.refresh)},canExecuteMethod:function(){return!0},permission:"platform:asset:create"},{name:"platform.commands.upload",icon:"fa fa-upload",executeMethod:function(){var e={id:"assetUpload",currentEntityId:s.currentEntity.url,title:"platform.blades.asset-upload.title",controller:"platformWebApp.assets.assetUploadController",template:"$(Platform)/Scripts/app/assets/blades/asset-upload.tpl.html"};o.showBlade(e,s)},canExecuteMethod:function(){return!0},permission:"platform:asset:create"},{name:"platform.commands.delete",icon:"fa fa-trash-o",executeMethod:function(){c(e.gridApi.selection.getSelectedRows())},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())},permission:"platform:asset:delete"}],e.setGridOptions=function(t){i.initialize(e,t,(function(t){e.$watch("pageSettings.currentPage",t.pagination.seek)}))},l.initializePagination(e,!0),s.refresh()}])},function(e,t){angular.module("platformWebApp").controller("platformWebApp.assets.assetSelectController",["$scope","platformWebApp.assets.api","platformWebApp.bladeNavigationService","platformWebApp.bladeUtils","platformWebApp.uiGridHelper",function(e,t,r,o,a){var n=e.blade;function l(e,t){return{id:e,name:t,blade:n,navigate:function(e){r.closeBlade(n,(function(){n.disableOpenAnimation=!0,r.showBlade(n,n.parentBlade)}))}}}n.template="$(Platform)/Scripts/app/assets/blades/asset-select.tpl.html",n.headIcon="fa-folder-o",n.currentEntity||(n.currentEntity={}),n.folder&&(n.currentEntity.url="/"+n.folder),n.refresh=function(){n.isLoading=!0,t.search({keyword:n.searchKeyword,folderUrl:n.currentEntity.url},(function(t){e.pageSettings.totalItems=t.totalCount,_.each(t.results,(function(e){e.isImage=e.contentType&&e.contentType.startsWith("image/")})),e.listEntries=t.results,n.isLoading=!1,function(){if(n.breadcrumbs){var e=n.breadcrumbs.slice(0);if(n.currentEntity.url&&_.all(e,(function(e){return e.id!==n.currentEntity.url}))){var t=l(n.currentEntity.url,n.currentEntity.name);e.push(t)}n.breadcrumbs=e}else{var r="all";n.folder&&(r=n.folder),n.breadcrumbs=[l(n.currentEntity.url,r)]}}()}),(function(e){r.setError("Error "+e.status,n)}))},e.selectNode=function(e){if("folder"===e.type){var t={id:n.id,title:n.title,breadcrumbs:n.breadcrumbs,currentEntity:e,disableOpenAnimation:!0,controller:n.controller,template:n.template,isClosingDisabled:n.isClosingDisabled,onSelect:n.onSelect};r.showBlade(t,n.parentBlade)}},n.toolbarCommands=[{name:"platform.commands.confirm",icon:"fa fa-check",executeMethod:function(){e.saveChanges()},canExecuteMethod:function(){return e.gridApi&&_.any(e.gridApi.selection.getSelectedRows())}}],e.saveChanges=function(){n.onSelect&&n.onSelect(e.gridApi.selection.getSelectedRows()),e.bladeClose()},e.setGridOptions=function(t){a.initialize(e,t,(function(t){e.$watch("pageSettings.currentPage",t.pagination.seek)}))},o.initializePagination(e,!0),n.refresh()}])},function(e,t){angular.module("platformWebApp").controller("platformWebApp.assets.assetUploadController",["$scope","platformWebApp.assets.api","platformWebApp.bladeNavigationService","FileUploader","platformWebApp.dialogService",function(e,t,r,o,a){var n,l=e.blade;l.fileUploadOptions||(l.fileUploadOptions={});var i=l.currentEntityId||"";function s(){l.parentBlade.refresh&&!l.fileUploadOptions.suppressParentRefresh&&l.parentBlade.refresh()}function p(e){if(_.any(n,(function(t){return"blob"===t.type&&t.name.toLowerCase()===e.file.name.toLowerCase()}))){var t=prompt('File "'+e.file.name+'" already exists!\n- Change name / press [OK] to overwrite.\n- Press [Cancel] to skip this file.\nFile name:',e.file.name);null==t?e.remove():t?t!==e.file.name?(e.file.name=t,p(e)):e.url+="&forceFileOverwrite=true":p(e)}}e.addImageFromUrl=function(){l.newExternalImageUrl&&(l.uploadCompleted=!1,i?t.uploadFromUrl({folderUrl:i,url:l.newExternalImageUrl},(function(e){s(),l.onUploadComplete&&l.onUploadComplete(e),l.newExternalImageUrl=void 0,l.uploadCompleted=!0})):a.showNotificationDialog({id:"error",title:"platform.dialogs.asset-upload-error.title",message:"platform.dialogs.asset-upload-error.message"}))},l.headIcon="fa-file-o",function(){if(!e.uploader){var c=e.uploader=new o({scope:e,url:"api/platform/assets?folderUrl="+i,method:"POST",removeAfterUpload:!0});l.fileUploadOptions.filterCallback&&angular.isFunction(l.fileUploadOptions.filterCallback)?c.filters.push({name:"customFileFilter",fn:l.fileUploadOptions.filterCallback}):l.fileUploadOptions.accept&&l.fileUploadOptions.accept.contains("image")&&c.filters.push({name:"imageFilter",fn:function(e){var t="|"+e.type.slice(e.type.lastIndexOf("/")+1)+"|";return-1!=="|jpg|png|jpeg|bmp|gif|svg+xml|".indexOf(t)}}),c.onAfterAddingAll=function(e){i?(l.isLoading=!0,l.uploadCompleted=!1,r.setError(null,l),t.search({folderUrl:i},(function(t){l.isLoading=!1,n=t.results,_.each(e,p),c.uploadAll()}),(function(e){r.setError("Error "+e.status,l)}))):a.showNotificationDialog({id:"error",title:"platform.dialogs.asset-upload-error.title",message:"platform.dialogs.asset-upload-error.message"})},c.onErrorItem=function(e,t,o,a){r.setError(e._file.name+" failed: "+(t.message?t.message:o),l)},c.onCompleteAll=function(){s(),l.uploadCompleted=!0},c.onSuccessItem=function(e,t){l.onUploadComplete&&l.onUploadComplete(t)}}}(),l.isLoading=!1}])},function(e,t){angular.module("platformWebApp").factory("platformWebApp.assets.api",["$resource",function(e){return e("api/platform/assets",{},{search:{method:"GET",url:"api/platform/assets",isArray:!1},createFolder:{method:"POST",url:"api/platform/assets/folder"},move:{method:"POST",url:"api/platform/assets/move"},uploadFromUrl:{method:"POST",params:{url:"@url",folderUrl:"@folderUrl",name:"@name"},isArray:!0}})}])}]);
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkFzc2V0cy93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkFzc2V0cy8uL1NjcmlwdHMvYXNzZXRzLmpzIiwid2VicGFjazovL1ZpcnRvQ29tbWVyY2UuQXNzZXRzLy4vU2NyaXB0cy9ibGFkZXMvYXNzZXQtbGlzdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkFzc2V0cy8uL1NjcmlwdHMvYmxhZGVzL2Fzc2V0LXNlbGVjdC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkFzc2V0cy8uL1NjcmlwdHMvYmxhZGVzL2Fzc2V0LXVwbG9hZC5qcyIsIndlYnBhY2s6Ly9WaXJ0b0NvbW1lcmNlLkFzc2V0cy8uL1NjcmlwdHMvcmVzb3VyY2VzL2Fzc2V0QXBpLmpzIl0sIm5hbWVzIjpbImluc3RhbGxlZE1vZHVsZXMiLCJfX3dlYnBhY2tfcmVxdWlyZV9fIiwibW9kdWxlSWQiLCJleHBvcnRzIiwibW9kdWxlIiwiaSIsImwiLCJtb2R1bGVzIiwiY2FsbCIsIm0iLCJjIiwiZCIsIm5hbWUiLCJnZXR0ZXIiLCJvIiwiT2JqZWN0IiwiZGVmaW5lUHJvcGVydHkiLCJlbnVtZXJhYmxlIiwiZ2V0IiwiciIsIlN5bWJvbCIsInRvU3RyaW5nVGFnIiwidmFsdWUiLCJ0IiwibW9kZSIsIl9fZXNNb2R1bGUiLCJucyIsImNyZWF0ZSIsImtleSIsImJpbmQiLCJuIiwib2JqZWN0IiwicHJvcGVydHkiLCJwcm90b3R5cGUiLCJoYXNPd25Qcm9wZXJ0eSIsInAiLCJzIiwidW5kZWZpbmVkIiwiQXBwRGVwZW5kZW5jaWVzIiwicHVzaCIsImFuZ3VsYXIiLCJjb25maWciLCIkc3RhdGVQcm92aWRlciIsInN0YXRlIiwidXJsIiwidGVtcGxhdGVVcmwiLCJjb250cm9sbGVyIiwiJHNjb3BlIiwiYmxhZGVOYXZpZ2F0aW9uU2VydmljZSIsInNob3dCbGFkZSIsImlkIiwidGVtcGxhdGUiLCJpc0Nsb3NpbmdEaXNhYmxlZCIsInJ1biIsIm1haW5NZW51U2VydmljZSIsIiRzdGF0ZSIsIm1lbnVJdGVtIiwicGF0aCIsImljb24iLCJ0aXRsZSIsInByaW9yaXR5IiwiYWN0aW9uIiwiZ28iLCJwZXJtaXNzaW9uIiwiYWRkTWVudUl0ZW0iLCIkdHJhbnNsYXRlIiwiYXNzZXRzIiwiZGlhbG9nU2VydmljZSIsIiRzdG9yYWdlIiwiYmxhZGVVdGlscyIsInVpR3JpZEhlbHBlciIsImJsYWRlIiwiZ2VuZXJhdGVCcmVhZGNydW1iIiwibmF2aWdhdGUiLCJicmVhZGNydW1iIiwiY2xvc2VCbGFkZSIsImRpc2FibGVPcGVuQW5pbWF0aW9uIiwicGFyZW50QmxhZGUiLCJkZWxldGVMaXN0Iiwic2VsZWN0aW9uIiwiY2xvc2VDaGlsZHJlbkJsYWRlcyIsImRpYWxvZyIsIm1lc3NhZ2UiLCJjYWxsYmFjayIsInJlbW92ZSIsImxpc3RFbnRyeUlkcyIsIl8iLCJwbHVjayIsInVybHMiLCJyZWZyZXNoIiwiZXJyb3IiLCJzZXRFcnJvciIsInN0YXR1cyIsInNob3dDb25maXJtYXRpb25EaWFsb2ciLCJjdXJyZW50RW50aXR5IiwiaXNMb2FkaW5nIiwic2VhcmNoIiwia2V5d29yZCIsInNlYXJjaEtleXdvcmQiLCJmb2xkZXJVcmwiLCJkYXRhIiwicGFnZVNldHRpbmdzIiwidG90YWxJdGVtcyIsInRvdGFsQ291bnQiLCJlYWNoIiwicmVzdWx0cyIsIngiLCJpc0ltYWdlIiwiY29udGVudFR5cGUiLCJzdGFydHNXaXRoIiwibm9DYWNoZVVybCIsIm1vZGlmaWVkRGF0ZSIsImxpc3RFbnRyaWVzIiwiYnJlYWRjcnVtYnMiLCJzbGljZSIsImFsbCIsImJyZWFkQ3J1bWIiLCJzZXRCcmVhZGNydW1icyIsImNvcHlVcmwiLCJ3aW5kb3ciLCJwcm9tcHQiLCJkb3dubG9hZFVybCIsIm9wZW4iLCJkZWxldGUiLCJzZWxlY3ROb2RlIiwibGlzdEl0ZW0iLCJ0eXBlIiwibmV3QmxhZGUiLCJoZWFkSWNvbiIsInRvb2xiYXJDb21tYW5kcyIsImV4ZWN1dGVNZXRob2QiLCJjYW5FeGVjdXRlTWV0aG9kIiwidG9vbHRpcCIsInJlc3VsdCIsImluc3RhbnQiLCJjcmVhdGVGb2xkZXIiLCJwYXJlbnRVcmwiLCJjdXJyZW50RW50aXR5SWQiLCJncmlkQXBpIiwiZ2V0U2VsZWN0ZWRSb3dzIiwiYW55Iiwic2V0R3JpZE9wdGlvbnMiLCJncmlkT3B0aW9ucyIsImluaXRpYWxpemUiLCIkd2F0Y2giLCJwYWdpbmF0aW9uIiwic2VlayIsImluaXRpYWxpemVQYWdpbmF0aW9uIiwiYXNzZXRzQXBpIiwiZm9sZGVyIiwib25TZWxlY3QiLCJzYXZlQ2hhbmdlcyIsImJsYWRlQ2xvc2UiLCJGaWxlVXBsb2FkZXIiLCJjdXJyZW50RW50aXRpZXMiLCJmaWxlVXBsb2FkT3B0aW9ucyIsInJlZnJlc2hQYXJlbnRCbGFkZSIsInN1cHByZXNzUGFyZW50UmVmcmVzaCIsInByb21wdFVzZXJEZWNpc2lvbiIsIml0ZW0iLCJ0b0xvd2VyQ2FzZSIsImZpbGUiLCJhZGRJbWFnZUZyb21VcmwiLCJuZXdFeHRlcm5hbEltYWdlVXJsIiwidXBsb2FkQ29tcGxldGVkIiwidXBsb2FkRnJvbVVybCIsIm9uVXBsb2FkQ29tcGxldGUiLCJzaG93Tm90aWZpY2F0aW9uRGlhbG9nIiwidXBsb2FkZXIiLCJzY29wZSIsIm1ldGhvZCIsInJlbW92ZUFmdGVyVXBsb2FkIiwiZmlsdGVyQ2FsbGJhY2siLCJpc0Z1bmN0aW9uIiwiZmlsdGVycyIsImZuIiwiYWNjZXB0IiwiY29udGFpbnMiLCJsYXN0SW5kZXhPZiIsImluZGV4T2YiLCJvbkFmdGVyQWRkaW5nQWxsIiwiYWRkZWRJdGVtcyIsInVwbG9hZEFsbCIsIm9uRXJyb3JJdGVtIiwicmVzcG9uc2UiLCJoZWFkZXJzIiwiX2ZpbGUiLCJvbkNvbXBsZXRlQWxsIiwib25TdWNjZXNzSXRlbSIsImZpbGVJdGVtIiwiaW1hZ2VzIiwiZmFjdG9yeSIsIiRyZXNvdXJjZSIsImlzQXJyYXkiLCJtb3ZlIiwicGFyYW1zIl0sIm1hcHBp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QUFTdEcsUUFBVVUsR0FBU3JCLElBR3BIaUcsRUFBU21CLGNBQWdCLFdBQ3JCL0IsSUFDQXJGLEVBQU02RixpQkFBa0IsR0FHNUJJLEVBQVNvQixjQUFnQixTQUFVQyxFQUFVQyxHQUNyQ3ZILEVBQU0rRixrQkFDTi9GLEVBQU0rRixpQkFBaUJ3QixLQW9EdkMvQyxHQUNBeEUsRUFBTXdCLFdBQVksTSxjQzlIMUJ2RCxRQUFRcEMsT0FBTyxrQkFDZDJMLFFBQVEsNEJBQTZCLENBQUMsWUFBYSxTQUFVQyxHQUMxRCxPQUFPQSxFQUFVLHNCQUF1QixHQUFJLENBQ3hDaEcsT0FBUSxDQUFFMEUsT0FBUSxNQUFPOUgsSUFBSyxzQkFBdUJxSixTQUFTLEdBQzlEMUQsYUFBYyxDQUFFbUMsT0FBUSxPQUFROUgsSUFBSyw4QkFDckNzSixLQUFNLENBQUV4QixPQUFRLE9BQVE5SCxJQUFLLDRCQUM3QnlILGNBQWUsQ0FBRUssT0FBUSxPQUFReUIsT0FBUSxDQUFFdkosSUFBSyxPQUFRdUQsVUFBVyxhQUFjdkYsS0FBTSxTQUFXcUwsU0FBUyIsImZpbGUiOiJhcHAuanMiLCJzb3VyY2VzQ29udGVudCI6WyIgXHQvLyBUaGUgbW9kdWxlIGNhY2hlXG4gXHR2YXIgaW5zdGFsbGVkTW9kdWxlcyA9IHt9O1xuXG4gXHQvLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuIFx0ZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXG4gXHRcdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuIFx0XHRpZihpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSkge1xuIFx0XHRcdHJldHVybiBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXS5leHBvcnRzO1xuIFx0XHR9XG4gXHRcdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG4gXHRcdHZhciBtb2R1bGUgPSBpbnN0YWxsZWRNb2R1bGVzW21vZHVsZUlkXSA9IHtcbiBcdFx0XHRpOiBtb2R1bGVJZCxcbiBcdFx0XHRsOiBmYWxzZSxcbiBcdFx0XHRleHBvcnRzOiB7fVxuIFx0XHR9O1xuXG4gXHRcdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuIFx0XHRtb2R1bGVzW21vZHVsZUlkXS5jYWxsKG1vZHVsZS5leHBvcnRzLCBtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuIFx0XHQvLyBGbGFnIHRoZSBtb2R1bGUgYXMgbG9hZGVkXG4gXHRcdG1vZHVsZS5sID0gdHJ1ZTtcblxuIFx0XHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuIFx0XHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG4gXHR9XG5cblxuIFx0Ly8gZXhwb3NlIHRoZSBtb2R1bGVzIG9iamVjdCAoX193ZWJwYWNrX21vZHVsZXNfXylcbiBcdF9fd2VicGFja19yZXF1aXJlX18ubSA9IG1vZHVsZXM7XG5cbiBcdC8vIGV4cG9zZSB0aGUgbW9kdWxlIGNhY2hlXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLmMgPSBpbnN0YWxsZWRNb2R1bGVzO1xuXG4gXHQvLyBkZWZpbmUgZ2V0dGVyIGZ1bmN0aW9uIGZvciBoYXJtb255IGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uZCA9IGZ1bmN0aW9uKGV4cG9ydHMsIG5hbWUsIGdldHRlcikge1xuIFx0XHRpZighX193ZWJwYWNrX3JlcXVpcmVfXy5vKGV4cG9ydHMsIG5hbWUpKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIG5hbWUsIHsgZW51bWVyYWJsZTogdHJ1ZSwgZ2V0OiBnZXR0ZXIgfSk7XG4gXHRcdH1cbiBcdH07XG5cbiBcdC8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbiBcdF9fd2VicGFja19yZXF1aXJlX18uciA9IGZ1bmN0aW9uKGV4cG9ydHMpIHtcbiBcdFx0aWYodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnRvU3RyaW5nVGFnKSB7XG4gXHRcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsIFN5bWJvbC50b1N0cmluZ1RhZywgeyB2YWx1ZTogJ01vZHVsZScgfSk7XG4gXHRcdH1cbiBcdFx0T2JqZWN0LmRlZmluZVByb3BlcnR5KGV4cG9ydHMsICdfX2VzTW9kdWxlJywgeyB2YWx1ZTogdHJ1ZSB9KTtcbiBcdH07XG5cbiBcdC8vIGNyZWF0ZSBhIGZha2UgbmFtZXNwYWNlIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDE6IHZhbHVlIGlzIGEgbW9kdWxlIGlkLCByZXF1aXJlIGl0XG4gXHQvLyBtb2RlICYgMjogbWVyZ2UgYWxsIHByb3BlcnRpZXMgb2YgdmFsdWUgaW50byB0aGUgbnNcbiBcdC8vIG1vZGUgJiA0OiByZXR1cm4gdmFsdWUgd2hlbiBhbHJlYWR5IG5zIG9iamVjdFxuIFx0Ly8gbW9kZSAmIDh8MTogYmVoYXZlIGxpa2UgcmVxdWlyZVxuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy50ID0gZnVuY3Rpb24odmFsdWUsIG1vZGUpIHtcbiBcdFx0aWYobW9kZSAmIDEpIHZhbHVlID0gX193ZWJwYWNrX3JlcXVpcmVfXyh2YWx1ZSk7XG4gXHRcdGlmKG1vZGUgJiA4KSByZXR1cm4gdmFsdWU7XG4gXHRcdGlmKChtb2RlICYgNCkgJiYgdHlwZW9mIHZhbHVlID09PSAnb2JqZWN0JyAmJiB2YWx1ZSAmJiB2YWx1ZS5fX2VzTW9kdWxlKSByZXR1cm4gdmFsdWU7XG4gXHRcdHZhciBucyA9IE9iamVjdC5jcmVhdGUobnVsbCk7XG4gXHRcdF9fd2VicGFja19yZXF1aXJlX18ucihucyk7XG4gXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShucywgJ2RlZmF1bHQnLCB7IGVudW1lcmFibGU6IHRydWUsIHZhbHVlOiB2YWx1ZSB9KTtcbiBcdFx0aWYobW9kZSAmIDIgJiYgdHlwZW9mIHZhbHVlICE9ICdzdHJpbmcnKSBmb3IodmFyIGtleSBpbiB2YWx1ZSkgX193ZWJwYWNrX3JlcXVpcmVfXy5kKG5zLCBrZXksIGZ1bmN0aW9uKGtleSkgeyByZXR1cm4gdmFsdWVba2V5XTsgfS5iaW5kKG51bGwsIGtleSkpO1xuIFx0XHRyZXR1cm4gbnM7XG4gXHR9O1xuXG4gXHQvLyBnZXREZWZhdWx0RXhwb3J0IGZ1bmN0aW9uIGZvciBjb21wYXRpYmlsaXR5IHdpdGggbm9uLWhhcm1vbnkgbW9kdWxlc1xuIFx0X193ZWJwYWNrX3JlcXVpcmVfXy5uID0gZnVuY3Rpb24obW9kdWxlKSB7XG4gXHRcdHZhciBnZXR0ZXIgPSBtb2R1bGUgJiYgbW9kdWxlLl9fZXNNb2R1bGUgP1xuIFx0XHRcdGZ1bmN0aW9uIGdldERlZmF1bHQoKSB7IHJldHVybiBtb2R1bGVbJ2RlZmF1bHQnXTsgfSA6XG4gXHRcdFx0ZnVuY3Rpb24gZ2V0TW9kdWxlRXhwb3J0cygpIHsgcmV0dXJuIG1vZHVsZTsgfTtcbiBcdFx0X193ZWJwYWNrX3JlcXVpcmVfXy5kKGdldHRlciwgJ2EnLCBnZXR0ZXIpO1xuIFx0XHRyZXR1cm4gZ2V0dGVyO1xuIFx0fTtcblxuIFx0Ly8gT2JqZWN0LnByb3RvdHlwZS5oYXNPd25Qcm9wZXJ0eS5jYWxsXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLm8gPSBmdW5jdGlvbihvYmplY3QsIHByb3BlcnR5KSB7IHJldHVybiBPYmplY3QucHJvdG90eXBlLmhhc093blByb3BlcnR5LmNhbGwob2JqZWN0LCBwcm9wZXJ0eSk7IH07XG5cbiBcdC8vIF9fd2VicGFja19wdWJsaWNfcGF0aF9fXG4gXHRfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiO1xuXG5cbiBcdC8vIExvYWQgZW50cnkgbW9kdWxlIGFuZCByZXR1cm4gZXhwb3J0c1xuIFx0cmV0dXJuIF9fd2VicGFja19yZXF1aXJlX18oX193ZWJwYWNrX3JlcXVpcmVfXy5zID0gMCk7XG4iLCLvu78vL0NhbGwgdGhpcyB0byByZWdpc3RlciBvdXIgbW9kdWxlIHRvIG1haW4gYXBwbGljYXRpb25cclxudmFyIG1vZHVsZVRlbXBsYXRlTmFtZSA9IFwidmlydG9Db21tZXJjZS5hc3NldHNcIjtcclxuXHJcbmlmIChBcHBEZXBlbmRlbmNpZXMgIT09IHVuZGVmaW5lZCkge1xyXG4gICAgQXBwRGVwZW5kZW5jaWVzLnB1c2gobW9kdWxlVGVtcGxhdGVOYW1lKTtcclxufVxyXG5cclxuYW5ndWxhci5tb2R1bGUobW9kdWxlVGVtcGxhdGVOYW1lLCBbXSlcclxuLmNvbmZpZyhbJyRzdGF0ZVByb3ZpZGVyJywgZnVuY3Rpb24gKCRzdGF0ZVByb3ZpZGVyKSB7XHJcbiAgICAkc3RhdGVQcm92aWRlclxyXG4gICAgICAgIC5zdGF0ZSgnd29ya3NwYWNlLmFzc2V0cycsIHtcclxuICAgICAgICAgICAgdXJsOiAnL2Fzc2V0cycsXHJcbiAgICAgICAgICAgIHRlbXBsYXRlVXJsOiAnJChQbGF0Zm9ybSkvU2NyaXB0cy9jb21tb24vdGVtcGxhdGVzL2hvbWUudHBsLmh0bWwnLFxyXG4gICAgICAgICAgICBjb250cm9sbGVyOiBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGJsYWRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiAnYXNzZXRMaXN0JyxcclxuICAgICAgICAgICAgICAgICAgICBjb250cm9sbGVyOiAncGxhdGZvcm1XZWJBcHAuYXNzZXRzLmFzc2V0TGlzdENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiAnTW9kdWxlcy8kKHZpcnRvQ29tbWVyY2UuQXNzZXRzKS9TY3JpcHRzL2JsYWRlcy9hc3NldC1saXN0LnRwbC5odG1sJyxcclxuICAgICAgICAgICAgICAgICAgICBpc0Nsb3NpbmdEaXNhYmxlZDogdHJ1ZVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2hvd0JsYWRlKGJsYWRlKTtcclxuICAgICAgICAgICAgfV1cclxuICAgICAgICB9KTtcclxufV0pXHJcbi5ydW4oXHJcbiAgWydwbGF0Zm9ybVdlYkFwcC5tYWluTWVudVNlcnZpY2UnLCAnJHN0YXRlJywgZnVuY3Rpb24gKG1haW5NZW51U2VydmljZSwgJHN0YXRlKSB7XHJcbiAgICAgIHZhciBtZW51SXRlbSA9IHtcclxuICAgICAgICAgIHBhdGg6ICdicm93c2UvYXNzZXRzJyxcclxuICAgICAgICAgIGljb246ICdmYSBmYS1mb2xkZXItbycsXHJcbiAgICAgICAgICB0aXRsZTogJ3BsYXRmb3JtLm1lbnUuYXNzZXRzJyxcclxuICAgICAgICAgIHByaW9yaXR5OiAxMzAsXHJcbiAgICAgICAgICBhY3Rpb246IGZ1bmN0aW9uICgpIHsgJHN0YXRlLmdvKCd3b3Jrc3BhY2UuYXNzZXRzJyk7IH0sXHJcbiAgICAgICAgICBwZXJtaXNzaW9uOiAncGxhdGZvcm06YXNzZXQ6YWNjZXNzJ1xyXG4gICAgICB9O1xyXG4gICAgICBtYWluTWVudVNlcnZpY2UuYWRkTWVudUl0ZW0obWVudUl0ZW0pO1xyXG4gIH1dKTsiLCJhbmd1bGFyLm1vZHVsZSgncGxhdGZvcm1XZWJBcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3BsYXRmb3JtV2ViQXBwLmFzc2V0cy5hc3NldExpc3RDb250cm9sbGVyJywgWyckc2NvcGUnLCAnJHRyYW5zbGF0ZScsICdwbGF0Zm9ybVdlYkFwcC5hc3NldHMuYXBpJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuZGlhbG9nU2VydmljZScsICckc2Vzc2lvblN0b3JhZ2UnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVVdGlscycsICdwbGF0Zm9ybVdlYkFwcC51aUdyaWRIZWxwZXInLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsICR0cmFuc2xhdGUsIGFzc2V0cywgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgZGlhbG9nU2VydmljZSwgJHN0b3JhZ2UsIGJsYWRlVXRpbHMsIHVpR3JpZEhlbHBlcikge1xyXG4gICAgICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XHJcbiAgICAgICAgICAgIGJsYWRlLnRpdGxlID0gJ3BsYXRmb3JtLmJsYWRlcy5hc3NldC1saXN0LnRpdGxlJztcclxuICAgICAgICAgICAgaWYgKCFibGFkZS5jdXJyZW50RW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYXNzZXRzLnNlYXJjaChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IGJsYWRlLnNlYXJjaEtleXdvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlclVybDogYmxhZGUuY3VycmVudEVudGl0eS51cmxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtcyA9IGRhdGEudG90YWxDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKGRhdGEucmVzdWx0cywgZnVuY3Rpb24gKHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHguaXNJbWFnZSA9IHguY29udGVudFR5cGUgJiYgeC5jb250ZW50VHlwZS5zdGFydHNXaXRoKCdpbWFnZS8nKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmICh4LmlzSW1hZ2UpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB4Lm5vQ2FjaGVVcmwgPSB4LnVybCArICc/dD0nICsgeC5tb2RpZmllZERhdGU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkc2NvcGUubGlzdEVudHJpZXMgPSBkYXRhLnJlc3VsdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy9TZXQgbmF2aWdhdGlvbiBicmVhZGNydW1ic1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZXRCcmVhZGNydW1icygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0sIGZ1bmN0aW9uIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAvL0JyZWFkY3J1bWJzXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHNldEJyZWFkY3J1bWJzKCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGJsYWRlLmJyZWFkY3J1bWJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy9DbG9uZSBhcnJheSAoYW5ndWxhci5jb3B5IGxlYXZlcyB0aGUgc2FtZSByZWZlcmVuY2UpXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGJyZWFkY3J1bWJzID0gYmxhZGUuYnJlYWRjcnVtYnMuc2xpY2UoMCk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vcHJldmVudCBkdXBsaWNhdGUgaXRlbXNcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmxhZGUuY3VycmVudEVudGl0eS51cmwgJiYgXy5hbGwoYnJlYWRjcnVtYnMsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LmlkICE9PSBibGFkZS5jdXJyZW50RW50aXR5LnVybDsgfSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGJyZWFkQ3J1bWIgPSBnZW5lcmF0ZUJyZWFkY3J1bWIoYmxhZGUuY3VycmVudEVudGl0eS51cmwsIGJsYWRlLmN1cnJlbnRFbnRpdHkubmFtZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFkY3J1bWJzLnB1c2goYnJlYWRDcnVtYik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzID0gYnJlYWRjcnVtYnM7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGJsYWRlLmJyZWFkY3J1bWJzID0gW2dlbmVyYXRlQnJlYWRjcnVtYihibGFkZS5jdXJyZW50RW50aXR5LnVybCwgJ2FsbCcpXTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2VuZXJhdGVCcmVhZGNydW1iKGlkLCBuYW1lKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4ge1xyXG4gICAgICAgICAgICAgICAgICAgIGlkOiBpZCxcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBuYW1lLFxyXG4gICAgICAgICAgICAgICAgICAgIGJsYWRlOiBibGFkZSxcclxuICAgICAgICAgICAgICAgICAgICBuYXZpZ2F0ZTogZnVuY3Rpb24gKGJyZWFkY3J1bWIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5jbG9zZUJsYWRlKGJsYWRlLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmRpc2FibGVPcGVuQW5pbWF0aW9uID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShibGFkZSwgYmxhZGUucGFyZW50QmxhZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBmdW5jdGlvbiBuZXdGb2xkZXIoKSB7XHJcbiAgICAgICAgICAgICAgICB2YXIgdG9vbHRpcCA9ICR0cmFuc2xhdGUuaW5zdGFudCgncGxhdGZvcm0uZGlhbG9ncy5jcmVhdGUtZm9sZGVyLnRpdGxlJyk7XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHByb21wdCh0b29sdGlwICsgXCJcXG5cXG5FbnRlciBmb2xkZXIgbmFtZTpcIik7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHJlc3VsdCAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYXNzZXRzLmNyZWF0ZUZvbGRlcih7IG5hbWU6IHJlc3VsdCwgcGFyZW50VXJsOiBibGFkZS5jdXJyZW50RW50aXR5LnVybCB9LCBibGFkZS5yZWZyZXNoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgJHNjb3BlLmNvcHlVcmwgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgd2luZG93LnByb21wdChcIkNvcHkgdG8gY2xpcGJvYXJkOiBDdHJsK0MsIEVudGVyXCIsIGRhdGEudXJsKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICRzY29wZS5kb3dubG9hZFVybCA9IGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICB3aW5kb3cub3BlbihkYXRhLnVybCwgJ19ibGFuaycpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy8kc2NvcGUucmVuYW1lID0gZnVuY3Rpb24gKGxpc3RJdGVtKSB7XHJcbiAgICAgICAgICAgIC8vICAgIHJlbmFtZShsaXN0SXRlbSk7XHJcbiAgICAgICAgICAgIC8vfTtcclxuXHJcbiAgICAgICAgICAgIC8vZnVuY3Rpb24gcmVuYW1lKGxpc3RJdGVtKSB7XHJcbiAgICAgICAgICAgIC8vICAgIHZhciByZXN1bHQgPSBwcm9tcHQoXCJFbnRlciBuZXcgbmFtZVwiLCBsaXN0SXRlbS5uYW1lKTtcclxuICAgICAgICAgICAgLy8gICAgaWYgKHJlc3VsdCkge1xyXG4gICAgICAgICAgICAvLyAgICAgICAgbGlzdEl0ZW0ubmFtZSA9IHJlc3VsdDtcclxuICAgICAgICAgICAgLy8gICAgfVxyXG4gICAgICAgICAgICAvL31cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGlzSXRlbXNDaGVja2VkKCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuICRzY29wZS5ncmlkQXBpICYmIF8uYW55KCRzY29wZS5ncmlkQXBpLnNlbGVjdGlvbi5nZXRTZWxlY3RlZFJvd3MoKSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5kZWxldGUgPSBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgZGVsZXRlTGlzdChbZGF0YV0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZGVsZXRlTGlzdChzZWxlY3Rpb24pIHtcclxuICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VDaGlsZHJlbkJsYWRlcyhibGFkZSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHZhciBkaWFsb2cgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImNvbmZpcm1EZWxldGVJdGVtXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcInBsYXRmb3JtLmRpYWxvZ3MuZm9sZGVycy1kZWxldGUudGl0bGVcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJwbGF0Zm9ybS5kaWFsb2dzLmZvbGRlcnMtZGVsZXRlLm1lc3NhZ2VcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgY2FsbGJhY2s6IGZ1bmN0aW9uIChyZW1vdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlmIChyZW1vdmUpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICB2YXIgbGlzdEVudHJ5SWRzID0gXy5wbHVjayhzZWxlY3Rpb24sICd1cmwnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBhc3NldHMucmVtb3ZlKHsgdXJsczogbGlzdEVudHJ5SWRzIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnJlZnJlc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChlcnJvcikgeyBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7IH0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd0NvbmZpcm1hdGlvbkRpYWxvZyhkaWFsb2cpO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICRzY29wZS5zZWxlY3ROb2RlID0gZnVuY3Rpb24gKGxpc3RJdGVtKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAobGlzdEl0ZW0udHlwZSA9PT0gJ2ZvbGRlcicpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmV3QmxhZGUgPSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBibGFkZS5pZCxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWRjcnVtYnM6IGJsYWRlLmJyZWFkY3J1bWJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiBsaXN0SXRlbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZU9wZW5BbmltYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGJsYWRlLmNvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBibGFkZS50ZW1wbGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDbG9zaW5nRGlzYWJsZWQ6IGJsYWRlLmlzQ2xvc2luZ0Rpc2FibGVkXHJcbiAgICAgICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlLnBhcmVudEJsYWRlKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIGJsYWRlLmhlYWRJY29uID0gJ2ZhLWZvbGRlci1vJztcclxuXHJcbiAgICAgICAgICAgIGJsYWRlLnRvb2xiYXJDb21tYW5kcyA9IFtcclxuICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICBuYW1lOiBcInBsYXRmb3JtLmNvbW1hbmRzLnJlZnJlc2hcIiwgaWNvbjogJ2ZhIGZhLXJlZnJlc2gnLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGJsYWRlLnJlZnJlc2gsXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMubmV3LWZvbGRlclwiLCBpY29uOiAnZmEgZmEtZm9sZGVyLW8nLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgbmV3Rm9sZGVyKCk7IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIHBlcm1pc3Npb246ICdwbGF0Zm9ybTphc3NldDpjcmVhdGUnXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMudXBsb2FkXCIsIGljb246ICdmYSBmYS11cGxvYWQnLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaWQ6IFwiYXNzZXRVcGxvYWRcIixcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdHlJZDogYmxhZGUuY3VycmVudEVudGl0eS51cmwsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogJ3BsYXRmb3JtLmJsYWRlcy5hc3NldC11cGxvYWQudGl0bGUnLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udHJvbGxlcjogJ3BsYXRmb3JtV2ViQXBwLmFzc2V0cy5hc3NldFVwbG9hZENvbnRyb2xsZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdGVtcGxhdGU6ICckKFBsYXRmb3JtKS9TY3JpcHRzL2FwcC9hc3NldHMvYmxhZGVzL2Fzc2V0LXVwbG9hZC50cGwuaHRtbCdcclxuICAgICAgICAgICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUobmV3QmxhZGUsIGJsYWRlKTtcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAncGxhdGZvcm06YXNzZXQ6Y3JlYXRlJ1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIC8ve1xyXG4gICAgICAgICAgICAgICAgLy8gICAgbmFtZTogXCJSZW5hbWVcIiwgaWNvbjogJ2ZhIGZhLWZvbnQnLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgZXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgIHJlbmFtZShnZXRGaXJzdENoZWNrZWQoKSlcclxuICAgICAgICAgICAgICAgIC8vICAgIH0sXHJcbiAgICAgICAgICAgICAgICAvLyAgICBjYW5FeGVjdXRlTWV0aG9kOiBpc1NpbmdsZUNoZWNrZWQsXHJcbiAgICAgICAgICAgICAgICAvLyAgICBwZXJtaXNzaW9uOiAncGxhdGZvcm06YXNzZXQ6dXBkYXRlJ1xyXG4gICAgICAgICAgICAgICAgLy99LFxyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6IFwicGxhdGZvcm0uY29tbWFuZHMuZGVsZXRlXCIsIGljb246ICdmYSBmYS10cmFzaC1vJyxcclxuICAgICAgICAgICAgICAgICAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7IGRlbGV0ZUxpc3QoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTsgfSxcclxuICAgICAgICAgICAgICAgICAgICBjYW5FeGVjdXRlTWV0aG9kOiBpc0l0ZW1zQ2hlY2tlZCxcclxuICAgICAgICAgICAgICAgICAgICBwZXJtaXNzaW9uOiAncGxhdGZvcm06YXNzZXQ6ZGVsZXRlJ1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAvLyAgICBuYW1lOiBcIkN1dFwiLFxyXG4gICAgICAgICAgICAgICAgLy8gICAgaWNvbjogJ2ZhIGZhLWN1dCcsXHJcbiAgICAgICAgICAgICAgICAvLyAgICBleGVjdXRlTWV0aG9kOiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICAvLyAgICB9LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgY2FuRXhlY3V0ZU1ldGhvZDogaXNJdGVtc0NoZWNrZWQsXHJcbiAgICAgICAgICAgICAgICAvLyAgICBwZXJtaXNzaW9uOiAnYXNzZXQ6ZGVsZXRlJ1xyXG4gICAgICAgICAgICAgICAgLy99LFxyXG4gICAgICAgICAgICAgICAgLy97XHJcbiAgICAgICAgICAgICAgICAvLyAgICBuYW1lOiBcIlBhc3RlXCIsXHJcbiAgICAgICAgICAgICAgICAvLyAgICBpY29uOiAnZmEgZmEtY2xpcGJvYXJkJyxcclxuICAgICAgICAgICAgICAgIC8vICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgIGFzc2V0cy5tb3ZlKHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgZm9sZGVyOiBibGFkZS5jdXJyZW50RW50aXR5LnVybCxcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgbGlzdEVudHJpZXM6ICRzdG9yYWdlLmNhdGFsb2dDbGlwYm9hcmRDb250ZW50XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgfSwgZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgICAgICBkZWxldGUgJHN0b3JhZ2UuY2F0YWxvZ0NsaXBib2FyZENvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgICAgICAgIGJsYWRlLnJlZnJlc2goKTtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgfSxcclxuICAgICAgICAgICAgICAgIC8vICAgIGNhbkV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICAgICByZXR1cm4gJHN0b3JhZ2UuY2F0YWxvZ0NsaXBib2FyZENvbnRlbnQ7XHJcbiAgICAgICAgICAgICAgICAvLyAgICB9LFxyXG4gICAgICAgICAgICAgICAgLy8gICAgcGVybWlzc2lvbjogJ2Fzc2V0OmRlbGV0ZSdcclxuICAgICAgICAgICAgICAgIC8vfVxyXG4gICAgICAgICAgICBdO1xyXG5cclxuICAgICAgICAgICAgLy8gdWktZ3JpZFxyXG4gICAgICAgICAgICAkc2NvcGUuc2V0R3JpZE9wdGlvbnMgPSBmdW5jdGlvbiAoZ3JpZE9wdGlvbnMpIHtcclxuICAgICAgICAgICAgICAgIHVpR3JpZEhlbHBlci5pbml0aWFsaXplKCRzY29wZSwgZ3JpZE9wdGlvbnMsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuY3Rpb24gKGdyaWRBcGkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLiR3YXRjaCgncGFnZVNldHRpbmdzLmN1cnJlbnRQYWdlJywgZ3JpZEFwaS5wYWdpbmF0aW9uLnNlZWspO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICBibGFkZVV0aWxzLmluaXRpYWxpemVQYWdpbmF0aW9uKCRzY29wZSwgdHJ1ZSk7XHJcblxyXG4gICAgICAgICAgICBibGFkZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgfV0pO1xyXG4iLCJhbmd1bGFyLm1vZHVsZSgncGxhdGZvcm1XZWJBcHAnKVxyXG4gICAgLmNvbnRyb2xsZXIoJ3BsYXRmb3JtV2ViQXBwLmFzc2V0cy5hc3NldFNlbGVjdENvbnRyb2xsZXInLCBbJyRzY29wZScsICdwbGF0Zm9ybVdlYkFwcC5hc3NldHMuYXBpJywgJ3BsYXRmb3JtV2ViQXBwLmJsYWRlTmF2aWdhdGlvblNlcnZpY2UnLCAncGxhdGZvcm1XZWJBcHAuYmxhZGVVdGlscycsICdwbGF0Zm9ybVdlYkFwcC51aUdyaWRIZWxwZXInLFxyXG4gICAgICAgIGZ1bmN0aW9uICgkc2NvcGUsIGFzc2V0c0FwaSwgYmxhZGVOYXZpZ2F0aW9uU2VydmljZSwgYmxhZGVVdGlscywgdWlHcmlkSGVscGVyKSB7XHJcbiAgICAgICAgICAgIHZhciBibGFkZSA9ICRzY29wZS5ibGFkZTtcclxuICAgICAgICAgICAgYmxhZGUudGVtcGxhdGUgPSAnJChQbGF0Zm9ybSkvU2NyaXB0cy9hcHAvYXNzZXRzL2JsYWRlcy9hc3NldC1zZWxlY3QudHBsLmh0bWwnO1xyXG5cclxuICAgICAgICAgICAgYmxhZGUuaGVhZEljb24gPSAnZmEtZm9sZGVyLW8nO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFibGFkZS5jdXJyZW50RW50aXR5KSB7XHJcbiAgICAgICAgICAgICAgICBibGFkZS5jdXJyZW50RW50aXR5ID0ge307XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGJsYWRlLmZvbGRlcikge1xyXG4gICAgICAgICAgICAgICAgYmxhZGUuY3VycmVudEVudGl0eS51cmwgPSAnLycgKyBibGFkZS5mb2xkZXI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGJsYWRlLnJlZnJlc2ggPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYXNzZXRzQXBpLnNlYXJjaChcclxuICAgICAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGtleXdvcmQ6IGJsYWRlLnNlYXJjaEtleXdvcmQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvbGRlclVybDogYmxhZGUuY3VycmVudEVudGl0eS51cmxcclxuICAgICAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChkYXRhKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS5wYWdlU2V0dGluZ3MudG90YWxJdGVtcyA9IGRhdGEudG90YWxDb3VudDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKGRhdGEucmVzdWx0cywgZnVuY3Rpb24gKHgpIHsgeC5pc0ltYWdlID0geC5jb250ZW50VHlwZSAmJiB4LmNvbnRlbnRUeXBlLnN0YXJ0c1dpdGgoJ2ltYWdlLycpOyB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJHNjb3BlLmxpc3RFbnRyaWVzID0gZGF0YS5yZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5pc0xvYWRpbmcgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vU2V0IG5hdmlnYXRpb24gYnJlYWRjcnVtYnNcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2V0QnJlYWRjcnVtYnMoKTtcclxuICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcignRXJyb3IgJyArIGVycm9yLnN0YXR1cywgYmxhZGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgLy9CcmVhZGNydW1ic1xyXG4gICAgICAgICAgICBmdW5jdGlvbiBzZXRCcmVhZGNydW1icygpIHtcclxuICAgICAgICAgICAgICAgIGlmIChibGFkZS5icmVhZGNydW1icykge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vQ2xvbmUgYXJyYXkgKGFuZ3VsYXIuY29weSBsZWF2ZXMgdGhlIHNhbWUgcmVmZXJlbmNlKVxyXG4gICAgICAgICAgICAgICAgICAgIHZhciBicmVhZGNydW1icyA9IGJsYWRlLmJyZWFkY3J1bWJzLnNsaWNlKDApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvL3ByZXZlbnQgZHVwbGljYXRlIGl0ZW1zXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsICYmIF8uYWxsKGJyZWFkY3J1bWJzLCBmdW5jdGlvbiAoeCkgeyByZXR1cm4geC5pZCAhPT0gYmxhZGUuY3VycmVudEVudGl0eS51cmw7IH0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBicmVhZENydW1iID0gZ2VuZXJhdGVCcmVhZGNydW1iKGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsLCBibGFkZS5jdXJyZW50RW50aXR5Lm5hbWUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhZGNydW1icy5wdXNoKGJyZWFkQ3J1bWIpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBibGFkZS5icmVhZGNydW1icyA9IGJyZWFkY3J1bWJzO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgbmFtZSA9IFwiYWxsXCI7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGJsYWRlLmZvbGRlcilcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZSA9IGJsYWRlLmZvbGRlcjtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUuYnJlYWRjcnVtYnMgPSBbZ2VuZXJhdGVCcmVhZGNydW1iKGJsYWRlLmN1cnJlbnRFbnRpdHkudXJsLCBuYW1lKV07XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIGdlbmVyYXRlQnJlYWRjcnVtYihpZCwgbmFtZSkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgICAgICAgICBpZDogaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgbmFtZTogbmFtZSxcclxuICAgICAgICAgICAgICAgICAgICBibGFkZTogYmxhZGUsXHJcbiAgICAgICAgICAgICAgICAgICAgbmF2aWdhdGU6IGZ1bmN0aW9uIChicmVhZGNydW1iKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2UuY2xvc2VCbGFkZShibGFkZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5kaXNhYmxlT3BlbkFuaW1hdGlvbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zaG93QmxhZGUoYmxhZGUsIGJsYWRlLnBhcmVudEJsYWRlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gaXNJdGVtc0NoZWNrZWQoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmdyaWRBcGkgJiYgXy5hbnkoJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gZ2V0U2VsZWN0ZWRBc3NldHMoKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gJHNjb3BlLmdyaWRBcGkuc2VsZWN0aW9uLmdldFNlbGVjdGVkUm93cygpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc2VsZWN0Tm9kZSA9IGZ1bmN0aW9uIChsaXN0SXRlbSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGxpc3RJdGVtLnR5cGUgPT09ICdmb2xkZXInKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIG5ld0JsYWRlID0ge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZDogYmxhZGUuaWQsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBibGFkZS50aXRsZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWRjcnVtYnM6IGJsYWRlLmJyZWFkY3J1bWJzLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50RW50aXR5OiBsaXN0SXRlbSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlzYWJsZU9wZW5BbmltYXRpb246IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGNvbnRyb2xsZXI6IGJsYWRlLmNvbnRyb2xsZXIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBsYXRlOiBibGFkZS50ZW1wbGF0ZSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgaXNDbG9zaW5nRGlzYWJsZWQ6IGJsYWRlLmlzQ2xvc2luZ0Rpc2FibGVkLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBvblNlbGVjdDogYmxhZGUub25TZWxlY3RcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNob3dCbGFkZShuZXdCbGFkZSwgYmxhZGUucGFyZW50QmxhZGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgYmxhZGUudG9vbGJhckNvbW1hbmRzID0gW1xyXG4gICAgICAgICAgICAgICAge1xyXG4gICAgICAgICAgICAgICAgICAgIG5hbWU6ICdwbGF0Zm9ybS5jb21tYW5kcy5jb25maXJtJyxcclxuICAgICAgICAgICAgICAgICAgICBpY29uOiAnZmEgZmEtY2hlY2snLFxyXG4gICAgICAgICAgICAgICAgICAgIGV4ZWN1dGVNZXRob2Q6IGZ1bmN0aW9uICgpIHsgJHNjb3BlLnNhdmVDaGFuZ2VzKCk7IH0sXHJcbiAgICAgICAgICAgICAgICAgICAgY2FuRXhlY3V0ZU1ldGhvZDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gaXNJdGVtc0NoZWNrZWQoKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIF07XHJcblxyXG4gICAgICAgICAgICAkc2NvcGUuc2F2ZUNoYW5nZXMgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmxhZGUub25TZWxlY3QpXHJcbiAgICAgICAgICAgICAgICAgICAgYmxhZGUub25TZWxlY3QoZ2V0U2VsZWN0ZWRBc3NldHMoKSk7XHJcblxyXG4gICAgICAgICAgICAgICAgJHNjb3BlLmJsYWRlQ2xvc2UoKTtcclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIC8vIHVpLWdyaWRcclxuICAgICAgICAgICAgJHNjb3BlLnNldEdyaWRPcHRpb25zID0gZnVuY3Rpb24gKGdyaWRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgICAgICB1aUdyaWRIZWxwZXIuaW5pdGlhbGl6ZSgkc2NvcGUsIGdyaWRPcHRpb25zLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmN0aW9uIChncmlkQXBpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICRzY29wZS4kd2F0Y2goJ3BhZ2VTZXR0aW5ncy5jdXJyZW50UGFnZScsIGdyaWRBcGkucGFnaW5hdGlvbi5zZWVrKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgYmxhZGVVdGlscy5pbml0aWFsaXplUGFnaW5hdGlvbigkc2NvcGUsIHRydWUpO1xyXG5cclxuICAgICAgICAgICAgYmxhZGUucmVmcmVzaCgpO1xyXG4gICAgICAgIH1dKTtcclxuIiwiYW5ndWxhci5tb2R1bGUoJ3BsYXRmb3JtV2ViQXBwJylcclxuICAgIC5jb250cm9sbGVyKCdwbGF0Zm9ybVdlYkFwcC5hc3NldHMuYXNzZXRVcGxvYWRDb250cm9sbGVyJywgWyckc2NvcGUnLCAncGxhdGZvcm1XZWJBcHAuYXNzZXRzLmFwaScsICdwbGF0Zm9ybVdlYkFwcC5ibGFkZU5hdmlnYXRpb25TZXJ2aWNlJywgJ0ZpbGVVcGxvYWRlcicsICdwbGF0Zm9ybVdlYkFwcC5kaWFsb2dTZXJ2aWNlJywgZnVuY3Rpb24gKCRzY29wZSwgYXNzZXRzLCBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLCBGaWxlVXBsb2FkZXIsIGRpYWxvZ1NlcnZpY2UpIHtcclxuICAgICAgICB2YXIgYmxhZGUgPSAkc2NvcGUuYmxhZGU7XHJcbiAgICAgICAgdmFyIGN1cnJlbnRFbnRpdGllcztcclxuICAgICAgICBpZiAoIWJsYWRlLmZpbGVVcGxvYWRPcHRpb25zKSB7XHJcbiAgICAgICAgICAgIGJsYWRlLmZpbGVVcGxvYWRPcHRpb25zID0ge307XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHZhciBmb2xkZXJVcmwgPSBibGFkZS5jdXJyZW50RW50aXR5SWQgfHwgXCJcIjtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gaW5pdGlhbGl6ZSgpIHtcclxuICAgICAgICAgICAgaWYgKCEkc2NvcGUudXBsb2FkZXIpIHtcclxuICAgICAgICAgICAgICAgIC8vIENyZWF0ZSB0aGUgdXBsb2FkZXJcclxuICAgICAgICAgICAgICAgIHZhciB1cGxvYWRlciA9ICRzY29wZS51cGxvYWRlciA9IG5ldyBGaWxlVXBsb2FkZXIoe1xyXG4gICAgICAgICAgICAgICAgICAgIHNjb3BlOiAkc2NvcGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdXJsOiAnYXBpL3BsYXRmb3JtL2Fzc2V0cz9mb2xkZXJVcmw9JyArIGZvbGRlclVybCxcclxuICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJyxcclxuICAgICAgICAgICAgICAgICAgICAvL2F1dG9VcGxvYWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgcmVtb3ZlQWZ0ZXJVcGxvYWQ6IHRydWVcclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChibGFkZS5maWxlVXBsb2FkT3B0aW9ucy5maWx0ZXJDYWxsYmFjayAmJiBhbmd1bGFyLmlzRnVuY3Rpb24oYmxhZGUuZmlsZVVwbG9hZE9wdGlvbnMuZmlsdGVyQ2FsbGJhY2spKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdXBsb2FkZXIuZmlsdGVycy5wdXNoKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbmFtZTogJ2N1c3RvbUZpbGVGaWx0ZXInLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICBmbjogYmxhZGUuZmlsZVVwbG9hZE9wdGlvbnMuZmlsdGVyQ2FsbGJhY2tcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmxhZGUuZmlsZVVwbG9hZE9wdGlvbnMuYWNjZXB0ICYmIGJsYWRlLmZpbGVVcGxvYWRPcHRpb25zLmFjY2VwdC5jb250YWlucygnaW1hZ2UnKSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHVwbG9hZGVyLmZpbHRlcnMucHVzaCh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG5hbWU6ICdpbWFnZUZpbHRlcicsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZuOiBmdW5jdGlvbiAoaXRlbSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHR5cGUgPSAnfCcgKyBpdGVtLnR5cGUuc2xpY2UoaXRlbS50eXBlLmxhc3RJbmRleE9mKCcvJykgKyAxKSArICd8JztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAnfGpwZ3xwbmd8anBlZ3xibXB8Z2lmfHN2Zyt4bWx8Jy5pbmRleE9mKHR5cGUpICE9PSAtMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHVwbG9hZGVyLm9uQWZ0ZXJBZGRpbmdBbGwgPSBmdW5jdGlvbiAoYWRkZWRJdGVtcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChmb2xkZXJVcmwpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYmxhZGUudXBsb2FkQ29tcGxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlTmF2aWdhdGlvblNlcnZpY2Uuc2V0RXJyb3IobnVsbCwgYmxhZGUpO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gY2hlY2sgZm9yIGFzc2V0IGR1cGxpY2F0ZXNcclxuICAgICAgICAgICAgICAgICAgICAgICAgYXNzZXRzLnNlYXJjaCh7IGZvbGRlclVybDogZm9sZGVyVXJsIH0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBmdW5jdGlvbiAoZGF0YSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLmlzTG9hZGluZyA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGN1cnJlbnRFbnRpdGllcyA9IGRhdGEucmVzdWx0cztcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgXy5lYWNoKGFkZGVkSXRlbXMsIHByb21wdFVzZXJEZWNpc2lvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdXBsb2FkZXIudXBsb2FkQWxsKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9LCBmdW5jdGlvbiAoZXJyb3IpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZU5hdmlnYXRpb25TZXJ2aWNlLnNldEVycm9yKCdFcnJvciAnICsgZXJyb3Iuc3RhdHVzLCBibGFkZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZGlhbG9nU2VydmljZS5zaG93Tm90aWZpY2F0aW9uRGlhbG9nKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICB0aXRsZTogXCJwbGF0Zm9ybS5kaWFsb2dzLmFzc2V0LXVwbG9hZC1lcnJvci50aXRsZVwiLFxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgbWVzc2FnZTogXCJwbGF0Zm9ybS5kaWFsb2dzLmFzc2V0LXVwbG9hZC1lcnJvci5tZXNzYWdlXCJcclxuICAgICAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB1cGxvYWRlci5vbkVycm9ySXRlbSA9IGZ1bmN0aW9uIChpdGVtLCByZXNwb25zZSwgc3RhdHVzLCBoZWFkZXJzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmxhZGVOYXZpZ2F0aW9uU2VydmljZS5zZXRFcnJvcihpdGVtLl9maWxlLm5hbWUgKyAnIGZhaWxlZDogJyArIChyZXNwb25zZS5tZXNzYWdlID8gcmVzcG9uc2UubWVzc2FnZSA6IHN0YXR1cyksIGJsYWRlKTtcclxuICAgICAgICAgICAgICAgIH07XHJcblxyXG4gICAgICAgICAgICAgICAgdXBsb2FkZXIub25Db21wbGV0ZUFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgICAgICByZWZyZXNoUGFyZW50QmxhZGUoKTtcclxuICAgICAgICAgICAgICAgICAgICBibGFkZS51cGxvYWRDb21wbGV0ZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgICAgICB1cGxvYWRlci5vblN1Y2Nlc3NJdGVtID0gZnVuY3Rpb24gKGZpbGVJdGVtLCBpbWFnZXMpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoYmxhZGUub25VcGxvYWRDb21wbGV0ZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5vblVwbG9hZENvbXBsZXRlKGltYWdlcyk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZnVuY3Rpb24gcmVmcmVzaFBhcmVudEJsYWRlKCkge1xyXG4gICAgICAgICAgICBpZiAoYmxhZGUucGFyZW50QmxhZGUucmVmcmVzaCAmJiAhYmxhZGUuZmlsZVVwbG9hZE9wdGlvbnMuc3VwcHJlc3NQYXJlbnRSZWZyZXNoKSB7XHJcbiAgICAgICAgICAgICAgICBibGFkZS5wYXJlbnRCbGFkZS5yZWZyZXNoKCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZ1bmN0aW9uIHByb21wdFVzZXJEZWNpc2lvbihpdGVtKSB7XHJcbiAgICAgICAgICAgIGlmIChfLmFueShjdXJyZW50RW50aXRpZXMsIGZ1bmN0aW9uICh4KSB7IHJldHVybiB4LnR5cGUgPT09ICdibG9iJyAmJiB4Lm5hbWUudG9Mb3dlckNhc2UoKSA9PT0gaXRlbS5maWxlLm5hbWUudG9Mb3dlckNhc2UoKSB9KSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIHJlc3VsdCA9IHByb21wdChcIkZpbGUgXFxcIlwiICsgaXRlbS5maWxlLm5hbWUgKyBcIlxcXCIgYWxyZWFkeSBleGlzdHMhXFxuLSBDaGFuZ2UgbmFtZSAvIHByZXNzIFtPS10gdG8gb3ZlcndyaXRlLlxcbi0gUHJlc3MgW0NhbmNlbF0gdG8gc2tpcCB0aGlzIGZpbGUuXFxuRmlsZSBuYW1lOlwiLCBpdGVtLmZpbGUubmFtZSk7XHJcbiAgICAgICAgICAgICAgICBpZiAocmVzdWx0ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnJlbW92ZSgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmICghcmVzdWx0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbXB0VXNlckRlY2lzaW9uKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChyZXN1bHQgIT09IGl0ZW0uZmlsZS5uYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbS5maWxlLm5hbWUgPSByZXN1bHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJvbXB0VXNlckRlY2lzaW9uKGl0ZW0pO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtLnVybCArPSBcIiZmb3JjZUZpbGVPdmVyd3JpdGU9dHJ1ZVwiO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAkc2NvcGUuYWRkSW1hZ2VGcm9tVXJsID0gZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICBpZiAoYmxhZGUubmV3RXh0ZXJuYWxJbWFnZVVybCkge1xyXG4gICAgICAgICAgICAgICAgYmxhZGUudXBsb2FkQ29tcGxldGVkID0gZmFsc2U7XHJcbiAgICAgICAgICAgICAgICBpZiAoZm9sZGVyVXJsKSB7ICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICBhc3NldHMudXBsb2FkRnJvbVVybCh7IGZvbGRlclVybDogZm9sZGVyVXJsLCB1cmw6IGJsYWRlLm5ld0V4dGVybmFsSW1hZ2VVcmwgfSwgZnVuY3Rpb24gKGRhdGEpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVmcmVzaFBhcmVudEJsYWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChibGFkZS5vblVwbG9hZENvbXBsZXRlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBibGFkZS5vblVwbG9hZENvbXBsZXRlKGRhdGEpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLm5ld0V4dGVybmFsSW1hZ2VVcmwgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJsYWRlLnVwbG9hZENvbXBsZXRlZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGRpYWxvZ1NlcnZpY2Uuc2hvd05vdGlmaWNhdGlvbkRpYWxvZyh7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlkOiBcImVycm9yXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRpdGxlOiBcInBsYXRmb3JtLmRpYWxvZ3MuYXNzZXQtdXBsb2FkLWVycm9yLnRpdGxlXCIsXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIG1lc3NhZ2U6IFwicGxhdGZvcm0uZGlhbG9ncy5hc3NldC11cGxvYWQtZXJyb3IubWVzc2FnZVwiXHJcbiAgICAgICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBibGFkZS5oZWFkSWNvbiA9ICdmYS1maWxlLW8nO1xyXG5cclxuICAgICAgICBpbml0aWFsaXplKCk7XHJcbiAgICAgICAgYmxhZGUuaXNMb2FkaW5nID0gZmFsc2U7XHJcbiAgICB9XSk7XHJcbiIsImFuZ3VsYXIubW9kdWxlKCdwbGF0Zm9ybVdlYkFwcCcpXHJcbi5mYWN0b3J5KCdwbGF0Zm9ybVdlYkFwcC5hc3NldHMuYXBpJywgWyckcmVzb3VyY2UnLCBmdW5jdGlvbiAoJHJlc291cmNlKSB7XHJcbiAgICByZXR1cm4gJHJlc291cmNlKCdhcGkvcGxhdGZvcm0vYXNzZXRzJywge30sIHtcclxuICAgICAgICBzZWFyY2g6IHsgbWV0aG9kOiAnR0VUJywgdXJsOiAnYXBpL3BsYXRmb3JtL2Fzc2V0cycsIGlzQXJyYXk6IGZhbHNlIH0sXHJcbiAgICAgICAgY3JlYXRlRm9sZGVyOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvcGxhdGZvcm0vYXNzZXRzL2ZvbGRlcicgfSxcclxuICAgICAgICBtb3ZlOiB7IG1ldGhvZDogJ1BPU1QnLCB1cmw6ICdhcGkvcGxhdGZvcm0vYXNzZXRzL21vdmUnIH0sXHJcbiAgICAgICAgdXBsb2FkRnJvbVVybDogeyBtZXRob2Q6ICdQT1NUJywgcGFyYW1zOiB7IHVybDogJ0B1cmwnLCBmb2xkZXJVcmw6ICdAZm9sZGVyVXJsJywgbmFtZTogJ0BuYW1lJyB9LCBpc0FycmF5OiB0cnVlIH1cclxuICAgIH0pO1xyXG59XSk7XHJcblxyXG4iXSwic291cmNlUm9vdCI6IiJ9